var relX = 0;
var relY = 0;
function setClickLocation(e) {
  var wrapper = $('#image-container');
  var parentOffset = wrapper.offset();
  relX = e.pageX - parentOffset.left - 10;
  relY = e.pageY - parentOffset.top + 90;
};
function boxIt(e) {
  if ($('#target-box').length){
    $('#target-box').remove();
  } else {
    console.log(e);
    $('#image-container').append('<div id="target-box">')
    $('#target-box').css({left: relX, top: relY});
  };
};
function targetMenu() {
  if ($('#target-menu').is(":visible")) {
    $('#target-menu').hide();
  } else {
    $('#target-menu').css({top: relY - $('#target-menu').height(), left: relX - 140});
    $('#target-menu').show();
  }
}

$(document).ready(function(){
  $('#image-container').append("<image src=<%= asset_path('kLH2UK6redditordisposedshrimp.jpg') %> class='search-image'></image>");
  $('#image-container').on('click', function(e) {
    setClickLocation(e);
    boxIt(e);
    targetMenu(e);
  });
});
